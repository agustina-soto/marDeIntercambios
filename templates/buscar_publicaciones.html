<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Publicaciones</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <h1>Buscar Publicaciones</h1>
    <form action="/publicacion/ver-publicacion/buscar_publicaciones/" method="GET" enctype="multipart/form-data">
        <!-- {% csrf_token %} -->
        <input type="text" name="buscar" id="buscar">
        <button type="submit">Publicar</button>
    </form>
    <section>
        {% if not publicaciones %}
            <div>No se encontraron resultados para: {{busqueda}}</div>

        {% else %}
            {% for pub in publicaciones %}
        <div class="card my-3 p-3">
            <a href="/publicacion/ver-publicacion/ver_detalle/{{pub.id}}">
            <p>Título: {{pub.titulo}}</p>
            <p>Año: {{pub.anio}}</p>
            <p>Tipo: {{pub.tipo_embarcacion}}</p>
            <p>Precio: ${{pub.precio_minimo}}</p>
            <button>Ver publicación</button>
            </a>
        </div>
        <hr>
            {% endfor %}
            <div class="pagination">
                <span class="step-links">
                    {% if publicaciones.has_previous %}
                        <!-- <a href="?buscar={{busqueda}}&page=1">&laquo; first</a> -->
                        <a href="?buscar={{busqueda}}&page={{ publicaciones.previous_page_number }}">Ver página anterior</a>
                    {% endif %}
            
                    <span class="current">
                        Page {{ publicaciones.number }} of {{ publicaciones.paginator.num_pages }}.
                    </span>
            
                    {% if publicaciones.has_next %}
                        <a href="?buscar={{busqueda}}&page={{ publicaciones.next_page_number }}">Ver más publiaciones</a>
                        <!-- <a href="?buscar={{busqueda}}&page={{ publicaciones.paginator.num_pages }}">last &raquo;</a> -->
                    {% endif %}
                </span>
            </div>
        {% endif %}
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>